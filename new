import sqlite3
conn = sqlite3.connect('credentials.db')
c = conn.cursor()

def signUp():
    c.execute('CREATE TABLE IF NOT EXISTS CREDENTIALS (ID TEXT PRIMARY KEY NOT NULL, NAME TEXT NOT NULL, PASSWORD TEXT NOT NULL, PHONE INT NOT NULL, EMAIL TEXT NOT NULL, OCCUPATION TEXT NOT NULL)')
    
    id = int(input("Enter ID: "))
    name = str(input("Enter name: "))
    pwd = str(input("Enter password: "))
    phone = int(input("Enter phone: "))
    email = str(input("Enter email: "))    
    occup = str(input("Enter occupation(student/ manager): "))

    try:
        c.execute("INSERT INTO CREDENTIALS (ID, NAME, PASSWORD, PHONE, EMAIL, OCCUPATION) VALUES(?, ?, ?, ?, ?, ?)",(id, name, pwd, phone, email, occup))
    except:
        print("ID has been taken pls re-enter")
        menu()
    #output = c.execute("SELECT * from CREDENTIALS")
    #for row in output:
    #    print(row)
    print("Sign up successful")
    conn.commit()
    menu()

def login():
    id = str(input("Enter ID: "))
    pwd = str(input("Enter password: "))
    output = c.execute("SELECT * from CREDENTIALS")
    for row in output:
        if id == row[0] and pwd == row[2]:
            if row [5] == "student":
                print("welcome", row[1])
                studentFeature()
            elif row [5] == "manager":
                print("welcome", row[1])
                managerFeature()
        else:
            print("password incorrect")
            menu()

def menu():
    choice=int(input("""[1]Login
[2]Sign Up
[3]End
Enter your choice: """))
    while choice < 1 or choice > 3:
        choice = int(input("Input invalid, enter again: "))
    if choice == 1:
        login()
    elif choice == 2:
        signUp()
    elif choice == 3:
        exit()

def studentFeature():
    print("studentFeature")

def managerFeature():
    print("managerFeature")

#main
menu()   
