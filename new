import sqlite3
def addBooks():
    categoryList =['literature', 'encyclopedia', 'guidlines', 'motivations', 'dictionary', 'history', 'news', 'others']
    
    conn = sqlite3.connect('books.db')
    c = conn.cursor()
    c.execute('''CREATE TABLE IF NOT EXISTS BOOKS 
                (ID INT NOT NULL,
                TITLE TEXT PRIMARY KEY NOT NULL,
                AUTHOR TEXT,
                CATEGORY TEXT NOT NULL, 
                AMOUNT INT NOT NULL,
                AMOUNTLEFT INT NOT NULL,
                PRICE REAL NOT NULL,
                DATEADDED TEXT NOT NULL, 
                BORROWEDBY TEXT,
                BORROWEDDATE TEXT,
                RETURNDATE TEXT);''')
    #id:
    #title:done
    #author:done
    #category:done
    #amount:done
    #amountleft:done
    #price:done
    #dateadded:done
    title = input("Title: ")
    fetch = c.execute('SELECT TITLE from BOOKS WHERE TITLE=?', (title,))
    if fetch.fetchone() != None:
        choice = str(input("Book exists, do you want to increase amount only? y/n "))
        while choice not in ('y', 'n'):
            print("Input invalid. ")
            choice = str(input("Book exists, do you want to increase amount only? y/n ")) 
        if choice == "y":
            find = c.execute('SELECT * from BOOKS WHERE TITLE=?', (title))
            for row in find:
                amount = row[3]
                print("Amount is", amount)
                newAmount = input("Enter amount to be added. ")
                amount += newAmount
            c.execute("UPDATE BOOKS set AMOUNT = ? WHERE TITLE = ?", (amount, title))
            conn.commit()
            quit()
        elif choice == "n":
            print("Menu")
            quit()
    else:
        c.execute("INSERT INTO BOOKS (TITLE) VALUES(?)", (title,))

    catChoice = int(input("[1]Literature\n[2]Encyclopedia\n[3]Guidlines\n[4]Motivations\n[5]Dictionary\n[6]History\n[7]News\n[8]Others\nEnter choice: "))
    while catChoice < 1 or catChoice >9:
        print("Input invalid. ")
        catChoice = int(input("[1]Literature\n[2]Encyclopedia\n[3]Guidlines\n[4]Motivations\n[5]Dictionary\n[6]History\n[7]News\n[8]Others\nEnter choice: "))
    category = categoryList[catChoice-1]
    c.execute("INSERT INTO BOOKS (CATEGORY) VALUES(?)", (category,))

    amount = input("Enter amount: ")
    while amount == '' or int(amount) <= 0 or amount.isdigit() == False:
        print("Invalid")
        amountleft = amount
    c.execute("INSERT INTO BOOKS (AMOUNT, AMOUNTLEFT) VALUES(?, ?)", (amount, amountleft,))

    price = input("Enter price: RM")
    while price == '' or price.isdigit() == False:
        print("Invalid")
        price = input("Enter price: RM")
    c.execute("INSERT INTO BOOKS (PRICE) VALUES(?)", (price,))

    author = str(input("Enter author: "))
    c.execute("INSERT INTO BOOKS (AUTHOR) VALUES(?)", (author,))

    langChoice = input("[1]English\n[2]Malay\n[3]Chinese\n[4]Tamil\n[5]Others\nEnter choice: ")
    while langChoice == '' or langChoice.isdigit() == False or langChoice < 1 or langChoice > 5:
         langChoice = input("[1]English\n[2]Malay\n[3]Chinese\n[4]Tamil\n[5]Others\nEnter choice: ")

    ficChoice = input("[1]Fiction\n[2]Non-fiction\nEnter choice: ")
    while ficChoice not in ('1', '2'):
        print("Invalid")
        ficChoice = input("[1]Fiction\n[2]Non-fiction\nEnter choice: ")
    ficChoice = int(ficChoice)
    if ficChoice == 1:
        id = 1
    else:
        id = 2
    
    today = c.execute("SELECT DATE ('now')")
    for x in today:
        date = x[0]
    c.execute("INSERT INTO BOOKS (DATEADDED) VALUES(?)", (date,))

    confirmation = str(input("Do you want to make any changes? y/n "))
    while confirmation not in ('y', 'n') or confirmation == '':
        print("Invalid")
        confirmation = str(input("Do you want to make any changes? y/n "))
    if confirmation == 'y':
        selection = input("[1]Title\n[2]Author\n[3]Category\n[4]Amount\n[5]Price\n[6]Cancel adding\nEnter choice: ")

    conn.commit()
